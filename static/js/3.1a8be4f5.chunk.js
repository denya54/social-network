(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[3],{103:function(t,e,n){"use strict";n.r(e);var r=n(2),s=n(25),o=n(26),i=n(31),c=n(29),a=n(0),u=n.n(a),l=n(92),j=n(96),p=n.n(j),f=n(30),b=n(1),h=function(t){Object(a.useEffect)((function(){s(t.status)}),[t.status]);var e=Object(a.useState)(t.status),n=Object(l.a)(e,2),r=n[0],s=n[1],o=Object(a.useState)(!1),i=Object(l.a)(o,2),c=i[0],u=i[1];return Object(b.jsx)("div",{children:c?Object(b.jsx)("div",{children:Object(b.jsx)("input",{value:r,onChange:function(t){return function(t){return s(t.currentTarget.value)}(t)},onBlur:function(){u(!1),t.updateStatus(r)},autoFocus:!0})}):Object(b.jsxs)("div",{children:["status: ",Object(b.jsx)("span",{onDoubleClick:function(){return u(!0)},children:r||"No status"})]})})},d=n.p+"static/media/nophotoava.1845a328.png",O=n(97),x=n.n(O),v=function(t){return Object(b.jsxs)("div",{className:x.a.contacts,children:[t.contactTitle,": ",t.contactValue]})},m=function(t){var e=Object(a.useState)(t.contactValue),n=Object(l.a)(e,2),r=n[0],s=n[1];return Object(b.jsxs)("div",{className:x.a.contacts,children:[t.contactTitle,": ",Object(b.jsx)("input",{value:r,onChange:function(t){s(t.currentTarget.value)}})]})},g=function(t){var e=Object(a.useState)(t.profile.fullName),n=Object(l.a)(e,2),r=n[0],s=n[1],o=Object(a.useState)(t.profile.aboutMe),i=Object(l.a)(o,2),c=i[0],u=i[1],j=Object(a.useState)(t.profile.lookingForAJob),p=Object(l.a)(j,2),f=p[0],h=p[1],d=Object(a.useState)(t.profile.lookingForAJobDescription),O=Object(l.a)(d,2),x=O[0],v=O[1];return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:["My name ",Object(b.jsx)("input",{value:r,onChange:function(t){return s(t.currentTarget.value)}})]}),Object(b.jsxs)("p",{children:["About me: ",Object(b.jsx)("textarea",{value:c,onChange:function(t){return u(t.currentTarget.value)}})]})]}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:["Looking for a job: ",Object(b.jsx)("input",{type:"checkbox",checked:f,onChange:function(t){return h(t.currentTarget.checked)}})]}),Object(b.jsxs)("p",{children:["My professional skills: ",Object(b.jsx)("textarea",{value:x,onChange:function(t){return v(t.currentTarget.value)}})]})]}),Object(b.jsx)("div",{children:t.profile.contacts&&Object(b.jsxs)("p",{children:["Contacts: ",Object.keys(t.profile.contacts).map((function(e){var n;return Object(b.jsx)(m,{contactTitle:e,contactValue:null===(n=t.profile)||void 0===n?void 0:n.contacts[e]},e)}))]})}),Object(b.jsx)("button",{onClick:function(){var e={fullName:r,aboutMe:c,lookingForAJob:f,lookingForAJobDescription:x};t.setProfileData(e),t.changeEditMode()},children:"Save"})]})},k=function(t){var e=Object(a.useState)(!1),n=Object(l.a)(e,2),r=n[0],s=n[1];if(!t.profile)return Object(b.jsx)(f.a,{});return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:p.a.descriptionBlock,children:[t.profile.photos.large?Object(b.jsx)("img",{className:p.a.picture,src:t.profile.photos.large}):Object(b.jsx)("img",{src:d,className:p.a.picture}),Object(b.jsx)(h,{status:t.status,updateStatus:t.updateStatus}),t.isOwner&&Object(b.jsxs)("div",{children:["\u0414\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043d\u043e\u0432\u043e\u0433\u043e \u0430\u0432\u0430\u0442\u0430\u0440\u0430 ",Object(b.jsx)("input",{type:"file",onChange:function(e){null!==e.target.files&&t.savePhoto(e.target.files[0])}})]})]}),r?Object(b.jsx)(g,{profile:t.profile,changeEditMode:function(){return s(!1)},setProfileData:t.setProfileData}):Object(b.jsx)(P,{profile:t.profile,isOwner:t.isOwner,changeEditMode:function(){return s(!0)}})]})},P=function(t){return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:["My name ",t.profile.fullName]}),Object(b.jsxs)("p",{children:["About me: ",t.profile.aboutMe]})]}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:["Looking for a job: ",t.profile.lookingForAJob?"yes":"no"]}),Object(b.jsxs)("p",{children:["My professional skills: ",t.profile.lookingForAJobDescription]})]}),Object(b.jsx)("div",{children:t.profile.contacts&&Object(b.jsxs)("p",{children:["Contacts: ",Object.keys(t.profile.contacts).map((function(e){var n;return Object(b.jsx)(v,{contactTitle:e,contactValue:null===(n=t.profile)||void 0===n?void 0:n.contacts[e]},e)}))]})}),t.isOwner&&Object(b.jsx)("button",{onClick:t.changeEditMode,children:"Change Profile Info"})]})},y=n(40),T=n(98),S=n.n(T),w=n(99),C=n.n(w),_=function(t){return Object(b.jsxs)("div",{className:C.a.item,children:[Object(b.jsx)("img",{src:"https://i.pinimg.com/236x/ad/f8/46/adf8468dafd48dc33091e0790d000c0e--dog-breath-high-five.jpg?nii=t"}),t.message,Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{children:"like "}),t.likesCount]})]})},A=n(94),M=n(43),D=n(17),I=u.a.memo((function(t){var e=Object(D.c)(),n=Object(M.a)({initialValues:{newPostText:""},onSubmit:function(t){e(Object(y.a)(t.newPostText)),n.resetForm()},validate:function(t){var e={};return t.newPostText||(e.newPostText="Post must be more 0 symbols "),e}}),r=t.statePosts.map((function(t){return Object(b.jsx)(_,{message:t.message,likesCount:t.likesCount},t.id)}));return Object(b.jsxs)("div",{className:S.a.postsBlock,children:[Object(b.jsx)("h3",{children:"My posts"}),Object(b.jsxs)("form",{onSubmit:n.handleSubmit,children:[Object(b.jsx)("textarea",{name:"newPostText",onChange:n.handleChange,value:n.values.newPostText,onBlur:n.handleBlur}),Object(b.jsx)("button",{children:"Create POST"})]}),n.errors.newPostText&&Object(b.jsx)("div",{style:{color:"red"},children:n.errors.newPostText}),Object(b.jsx)("div",{className:S.a.posts,children:r})]})})),N=(Object(A.a)(10),I),W=Object(D.b)((function(t){return{statePosts:t.profilePage.posts}}),(function(t){return{addPost:function(e){t(Object(y.a)(e))}}}))(N),F=function(t){return Object(b.jsxs)("div",{children:[Object(b.jsx)(k,{profile:t.profile,status:t.status,updateStatus:t.updateStatus,isOwner:t.isOwner,savePhoto:t.setPhoto,setProfileData:t.setProfileData}),Object(b.jsx)(W,{})]})},B=n(5),J=n(95),E=n(23),U=function(t){Object(i.a)(n,t);var e=Object(c.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"refreshProfile",value:function(){var t=this.props.match.params.userId;t||(t=this.props.authorisedUserID)||this.props.history.push("/login"),this.props.getUserProfileWithThunk(t),this.props.getStatusWithThunk(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,e,n){this.props.match.params.userId!==t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(b.jsx)(F,Object(r.a)(Object(r.a)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatusWithThunk,setPhoto:this.props.updatePhotoWithThunk,setProfileData:this.props.updateProfileWithThunk}))}}]),n}(u.a.Component);e.default=Object(E.c)(Object(D.b)((function(t){return{profile:t.profilePage.profile,posts:t.profilePage.posts,status:t.profilePage.status,authorisedUserID:t.auth.id,isAuth:t.auth.isAuth}}),{getUserProfileWithThunk:y.d,getStatusWithThunk:y.c,updateStatusWithThunk:y.g,updatePhotoWithThunk:y.e,updateProfileWithThunk:y.f}),B.f,J.a)(U)},92:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(41);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,s=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(a){s=!0,o=a}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}return n}}(t,e)||Object(r.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},94:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return function(e){return e.length>t?"Max length is ".concat(t," symbols"):void 0}}},95:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(2);function s(t,e){if(null==t)return{};var n,r,s=function(t,e){if(null==t)return{};var n,r,s={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(s[n]=t[n]);return s}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}n(0);var o=n(5),i=n(17),c=n(1),a=function(t){return{isAuth:t.auth.isAuth}};function u(t){return Object(i.b)(a)((function(e){var n=e.isAuth,i=s(e,["isAuth"]);return n?Object(c.jsx)(t,Object(r.a)({},i)):Object(c.jsx)(o.a,{to:"/login"})}))}},96:function(t,e,n){t.exports={descriptionBlock:"ProfileInfo_descriptionBlock__3sjtI",picture:"ProfileInfo_picture__dwuAz"}},97:function(t,e,n){t.exports={contacts:"Contacts_contacts__2P44K"}},98:function(t,e,n){t.exports={postsBlock:"MyPost_postsBlock__38F5G",posts:"MyPost_posts__2Np6r"}},99:function(t,e,n){t.exports={item:"Post_item__3frWF"}}}]);
//# sourceMappingURL=3.1a8be4f5.chunk.js.map